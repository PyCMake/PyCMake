dependencies:
  pre:
    - sudo apt-get update
    - sudo apt-get install gfortran libboost-python-dev python-vtk
    - "wget --no-check-certificate --progress=dot \
        \"https://cmake.org/files/v3.5/cmake-3.5.0-Linux-x86_64.tar.gz\""
    - tar xzf "cmake-3.5.0-Linux-x86_64.tar.gz"
    - sudo rsync -avz "cmake-3.5.0-Linux-x86_64/" /usr/local

  override:
    - pip install -r requirements.txt
    - pip install -r requirements-dev.txt

test:
  pre:
    - "export DISPLAY=:99.0"
    - "/sbin/start-stop-daemon --start --quiet --pidfile /tmp/xvfb.pid \
        --make-pidfile --background --exec /usr/bin/Xvfb -- \
          :99 -ac -screen 0 1024x768x24"
    - sleep 10

  override:
    - echo $PYTHONPATH
    - python -c "import pprint, sys ; pprint.pprint(sys.path)"
    - nosetests -w tests

  post:
    - "/sbin/start-stop-daemon --stop --quiet --pidfile /tmp/xvfb.pid"
    - "rm -f /tmp/xvfb.pid"
